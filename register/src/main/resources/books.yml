# api-docs/yaml/books.yml

apiVersion: 1.0.0
swaggerVersion: "1.2"
basePath: "/v1"
resourcePath: /books
produces: 
  - application/json
apis: 
  - path: "/books/{id}"
    operations:
      - method: GET
        summary: Retrieve a book, along with its metadata and options
        notes: Returns all available data if secretKey is supplied, otherwise returns only the public record.
        type: Book
        nickname: getBookById
        produces: 
          - application/json
        parameters: 
          - name: id
            description: ID of the book to fetch
            required: true
            allowMultiple: false
            type: string
            paramType: path
          - name: secretKey
            description: Secret key for the request
            required: false
            allowMultiple: false
            type: string
            paramType: query
        responseMessages: 
          - code: 404
            message: Book not found

models: 
  BookChapter:
    id: BookChapter
    title: Chapter
    type: object
    description: "A chapter within the book, to support displaying a table-of-contents."
    required:
      - title
    properties: 
      title:
        type: string
        description: "The title of the chapter"
  Book:
    id: Book
    title: Book
    type: object
    description: "A Book record with optional chapters."
    required: 
      - title
    properties: 
      id: 
        type: string
        description: "Unique ID for this book"
      title:
        type: string
        description: "Book title"
      author:
        type: string
        description: "Author name"
      chapters:
        type: array
        description: "One or more Chapters to list in a TOC"
        items:
          $ref: BookChapter